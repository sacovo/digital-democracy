{% extends 'papers/base.html' %}
{% load i18n %}

{% block title %}{% trans 'Papers' %}{% endblock %}

{% block content %}

    <h1>{% trans 'Search Results:' %}</h1>
    {% if searched %}
        You have searched for: {{ searched }}<b></b><br><br>
        <h2>{% trans 'Papers' %}</h2>
        <table class="table">
          <caption class="sr-only">{% trans 'Amendments' %}</caption>
          <thead>
            <tr>
              <th scope="col">{% trans 'Title' %}</th>
              <th scope="col">{% trans 'State' %}</th>
              <th scope="col">{% trans 'Created on' %}</th>
              <th scope="col">{% trans 'Deadline' %}</th>
            </tr>
          </thead>
          <tbody>
            <tr>{% for paper in result_papers %}<tr>
                <td><a href="{% url 'paper-detail' paper.pk %}">{{ paper }}</a></td>
                <td>{{ paper.state }}</td>
                <td>{{ paper.created_at }}</td>
                <td>{{ paper.amendment_deadline }}</td>
              </tr>{% endfor %} </tr>

          </tbody>
        </table>

        <h2>{% trans 'Amendments' %}</h2>
        <table class="table">
          <caption class="sr-only">{% trans 'Amendments' %}</caption>
          <thead>
            <tr><th scope="col">{% trans 'Title' %}</th>
              <th scope="col">{% trans 'State' %}</th>
              <th scope="col">{% trans 'Author' %}</th>
              <th scope="col">{% trans '# Supporters' %}</th>
            </tr>
          </thead>
          <tbody>
            <tr>{% for amendment in result_amendments %}<tr>
              {% if amendment.state == 'public' and request.user.username != amendment.author.name or request.user.username == amendment.author.name %}
                <td><a href="{% url 'amendment-detail' amendment.pk %}">{{ amendment.paper }}, {{ amendment.title }}</a></td>
                <td>{{ amendment.state }}</td>
                <td>{{ amendment.author }}</td>
                <td>{{ amendment.supporters.count }}</td>
              {% endif %}
            </tr>{% endfor %} </tr>
          </tbody>
        </table>
        {% else %}
        {% trans 'Nothing given to search for.' %}
    {% endif %}

{% endblock %}